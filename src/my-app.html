<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="my-icons.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">

<dom-module id="my-app">
  <template>
    <style>
      :host {
        --app-primary-color: #4285f4;
        --app-secondary-color: black;

        display: block;
      }

      app-header {
        color: #fff;
        background-color: var(--app-primary-color);
      }
      app-header paper-icon-button {
        --paper-icon-button-ink-color: white;
      }

      .drawer-list {
        margin: 0 20px;
      }

      .drawer-list a {
        display: block;
        padding: 0 16px;
        text-decoration: none;
        color: var(--app-secondary-color);
        line-height: 40px;
      }

      .drawer-list a.iron-selected {
        color: black;
        font-weight: bold;
      }

      #leftColumn{
        border-right: solid black;
        height: 799px; /*approx height of page*/
        width: 15%;
        text-align: center;
        display: inline-block;
          background-color: #e4e0dc;
          background: linear-gradient(#e4e0dc, white);
        float: left;
      }

      #rightColumn{
        height: 799px;
        width: 84%;
        background-color: #e4e0dc;
        background: linear-gradient(#e4e0dc, white);
        float: left;
        display: inline-block;
        overflow-y: scroll;
          text-align: center;
      }

      #image{
        border: solid black;
        border-radius: 60px;
        /*box-shadow: 10px 10px 5px #888888;*/
        min-height: 115px;
        min-width: 113px;
        margin-top: 10px;
        display: inline-block;
      }

      #imageContainer{
        text-align: center;
      }

      .page{
        width: 100%;
        height: 100%;
      }

        .title{
            text-align: center;
            margin-bottom:0;
            display: inline-block;
            width: 60%;
            border-bottom: solid 0.5px black;
        }

        .bookshelf{
            padding: 20px;
        }

        .book-summary{
            float: left;
            padding-left: 20px;
            max-width: 75%;
        }

        .book-title{
            margin: 0;
        }

        .book-description{
            font-size: 13px;
            margin:0;
        }

        .book-cover{
            float: left;
            height: 160px;
            width: auto;
            padding-top: 31px;
        }

        .bookshelf-item{
            display: inline-block;
            padding: 0 20px;
            max-width: 45%;
            background-color: #efefef;
            box-shadow: 0 1px 2px black;
            transition: box-shadow 0.3s ease-in-out;
            text-align: left;
        }

        .bookshelf-item:hover{
            box-shadow: 0 5px 15px black;
            cursor: pointer;
        }

        #image{
            background-image: url(../images/me.jpg);
            background-size: 100%;
        }

      .currently-reading{
          font-size: 23px;
          padding-bottom: 10px;
      }

        .currently-reading-book-cover{
            height: 130px;
            width: auto;
            cursor: pointer;
        }

        .on-deck{
            font-size: 20px;
        }

        .on-deck-reading-item{
            padding-left: 10px;
        }

        .on-deck-title{
            display: block;
            font-size: 0.7em;
            text-align: left;
        }

        .on-deck-author{
            display: block;
            font-size: 0.4em;
            color: grey;
            text-align: left;
        }

        .rating{
            display: inline-block;
        }

      .icons{
          padding: 5px;
          text-align: center;
      }

        a{
            text-decoration: none;
        }
    </style>

    <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/:page"
        data="{{routeData}}"
        tail="{{subroute}}"></app-route>

        <iron-selector hidden selected="[[page]]" attr-for-selected="name" class="drawer-list" role="navigation">
          <a name="bookshelf" href="/bookshelf">Bookshelf</a>
        </iron-selector>

        <iron-pages
            selected="[[page]]"
            attr-for-selected="name"
            fallback-selection="bookshelf"
            role="main">
          <my-view404 name="view404"></my-view404>
          <div name="bookshelf" class="page">
            <div id="leftColumn">
              <div id="imageContainer">
                <div id="image"></div>
              </div>
                <div class="icons">
                    <a href="https://twitter.com/Theekenator">
                        <img class="icon" src="../images/twitter.svg" alt="Twitter" height="20" width="20">
                    </a>
                    <a href="https://www.linkedin.com/in/sptheeke">
                        <img class="icon" src="../images/linkedin.svg" alt="LinkedIn" height="20" width="20">
                    </a>
                </div>
              <div class="currently-reading">Currently Reading
                  <template is="dom-repeat" items="[[currentlyReading]]" as="book">
                      <div class="currently-reading-item">
                          <img src="[[book.cover]]" class="currently-reading-book-cover">
                      </div>
                  </template>
              </div>
              <div class="on-deck">On Deck
                  <template is="dom-repeat" items="[[onDeck]]" as="book">
                      <div class="on-deck-reading-item">
                          <span class="on-deck-title">[[book.title]]</span>
                          <span class="on-deck-author">by [[book.author]]</span>
                      </div>
                  </template>
              </div>
            </div>
            <div id="rightColumn">
                <h1 class="title">Seth's Bookshelf</h1>
                <div class="bookshelf">
                    <template is="dom-repeat" items="{{books}}" as="book">
                        <div class="bookshelf-item">
                            <img src="{{book.cover}}" class="book-cover">
                            <div class="book-summary">
                                <h3 class="book-title">[[book.title]]</h3>
                                <p class="book-description">[[book.description]] [[book.review]]</p>
                                <template is="dom-repeat" items="[[book.rating]]">
                                    <div class="rating">*</div>
                                </template>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
          </div>
        </iron-pages>
  </template>

  <script>
    Polymer({
      is: 'my-app',

      properties: {
        page: {
          type: String,
          reflectToAttribute: true,
          observer: '_pageChanged',
        },

          books:{
              type: Array,
              value: [
                  {
                      "cover": "../images/mythical-man-month.jpg",
                      "title": "The Mythical Man-Month",
                      "genre": "Software Engineering Management",
                      "description": "The Mythical Man-Month brings to light all the fundamental problems with producing quality software on time, the various ways to solve those problems, and goes into depth about how some of those problems will never be solved.",
                      "review": "I read this book because I thought it was something I had to do since I was a Software Engineer. As I read, I became more and more disinterested because I felt like I was reading things I had already learned in the workplace. This book is best kept to those who haven't gained much experience as a software engineer.",
                      "rating": ["star", "star", "star"]
                  }
              ]
          },

          currentlyReading:{
              type: Array,
              value: [
                  {
                      "cover":"../images/faster-higher-stronger.jpg"
                  }
              ]
          },

          onDeck:{
              type: Array,
              value: [
                  {
                      "title": "The Marshmallow Test",
                      "author": "Walter Mischel"
                  },
                  {
                      "title": "Creativity, Inc.",
                      "author": "Amy Wallace and Edwin Catmull"
                  },
                  {
                      "title": "The Pragmatic Programmer",
                      "author": "Andy Hunt and Dave Thomas"
                  },
                  {
                      "title": "Don't Make Me Think",
                      "author": "Steve Krug"
                  }
              ]
          }
      },

      observers: [
        '_routePageChanged(routeData.page)',
      ],

      _routePageChanged: function(page) {
//        this.page = page || 'view1';
//
//        if (!this.$.drawer.persistent) {
//          this.$.drawer.close();
//        }
      },

      _pageChanged: function(page) {
        if (page !== "bookshelf") {
          // Load page import on demand. Show 404 page if fails
          var resolvedPageUrl = this.resolveUrl('my-' + page + '.html');
          this.importHref(resolvedPageUrl, null, this._showPage404, true);
        }
      },

      _showPage404: function() {
        this.page = 'view404';
      }
    });
  </script>
</dom-module>
